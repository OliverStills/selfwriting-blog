# ðŸš€ Layrid Production Deployment Guide

## âœ… ALL INTEGRATION COMPLETE!

Your blog content is now integrated with the Layrid design and ready for Railway deployment.

---

## ðŸŽ¯ What Was Built

### 1. **Production-Ready Index** (`Layrid-Clone/index.php`)
- âœ… Video hero banner (`fifth-state-video.mp4`)
- âœ… Blog content from database
- âœ… Phase cards (STILL, GRIT, REFLECTION, ASCEND)
- âœ… Blog posts grid with AI-generated images
- âœ… Smooth scroll & animations
- âœ… Dark theme, modern design

### 2. **AI Image Generation** (`src/ImageGenerator.php`)
- âœ… Nano Banana (Google Imagen) API integration
- âœ… Automatic image generation for each post
- âœ… Theme-based prompts (dark, moody, cinematic)
- âœ… Fallback images if generation fails
- âœ… Images saved to `/public/images/posts/`

### 3. **Database Updates**
- âœ… Added `image_url` column to posts table
- âœ… Methods to update post images
- âœ… Automatic image generation on new posts

### 4. **Updated Post Generation**
- âœ… Posts now automatically get AI images
- âœ… Images relate to post content
- âœ… Framework-based content
- âœ… Book recommendations

---

## ðŸŒ Your New Production Site Structure

```
Layrid-Clone/
â”œâ”€â”€ index.php              â† Main homepage (Layrid design + blog content)
â”œâ”€â”€ style.css              â† Complete styling
â”œâ”€â”€ script.js              â† Smooth scroll + animations
â””â”€â”€ fifth-state-video.mp4  â† Hero banner video

public/
â”œâ”€â”€ post.php               â† Individual post pages (keep existing)
â”œâ”€â”€ styles.css             â† Post page styles
â””â”€â”€ images/
    â””â”€â”€ posts/             â† AI-generated images stored here

src/
â”œâ”€â”€ ImageGenerator.php     â† NEW: AI image generation
â”œâ”€â”€ PostGenerator.php      â† Updated: creates images
â”œâ”€â”€ Database.php           â† Updated: image_url support
â”œâ”€â”€ BookSelector.php       â† Existing: book recommendations
â””â”€â”€ config.php             â† Existing: configuration

.env                        â† Contains NANO_BANANA_API_KEY
```

---

## ðŸ“¸ How Image Generation Works

### When a New Post is Created:
1. Blog content generated by Claude
2. AI analyzes title & excerpt
3. Creates cinematic prompt (dark, moody aesthetic)
4. Calls Nano Banana API
5. Saves image locally
6. Links image to post in database

### Image Prompts Include:
- **Style:** Dark, muted colors, high contrast, dramatic lighting
- **Theme:** Based on post topic (rejection â†’ rooftop, burnout â†’ shadows, career â†’ stairs)
- **Aesthetic:** Visualize Value meets noir photography
- **Requirements:** No text, minimalist, professional quality

---

## ðŸ§ª Testing Locally

### 1. View the New Site

**Stop old server (if running):**
```powershell
Stop-Process -Name php -Force
```

**Start new server from Layrid-Clone:**
```powershell
cd Layrid-Clone
php -S localhost:8000
```

**Open:** http://localhost:8000

### 2. Generate Images for Existing Posts

```powershell
# In project root
php generate-post-images.php
```

This will:
- Check all posts for missing images
- Generate AI images for each
- Save to database
- Takes ~3 seconds per image

### 3. Generate a New Post with Image

```powershell
php cron/generate-post.php
```

Watch for:
```
âœ“ Post generated successfully
âœ“ Generating AI image for post...
âœ“ Image generated successfully: /images/posts/...
âœ“ Post saved with ID: X
```

---

## ðŸš€ Deploying to Railway

### Step 1: Prepare Repository

```bash
# Make Layrid-Clone the main public folder
# Option A: Rename folders
mv public public-old
mv Layrid-Clone public

# Option B: Update Railway config (see below)
```

### Step 2: Update Railway Configuration

Create `railway.toml`:
```toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "php -S 0.0.0.0:$PORT -t Layrid-Clone"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "ALWAYS"
```

### Step 3: Set Environment Variables in Railway

```
CLAUDE_API_KEY=your_claude_api_key
NANO_BANANA_API_KEY=AIzaSyD0tYbHJhSineNg0OLp4XSMIM7lAZQXrUE
AMAZON_AFFILIATE_ID=thefifthstate-20
CRON_SECRET=your_random_secret
ENVIRONMENT=production
CRON_INTERVAL=1440
```

### Step 4: Add Volume for Database & Images

In Railway dashboard:
- **Mount Path:** `/app/database`
- **Size:** 1GB
- **Mount Path:** `/app/public/images`
- **Size:** 2GB (for AI-generated images)

### Step 5: Push to GitHub

```bash
git add .
git commit -m "Integrated Layrid design with AI image generation"
git push origin main
```

### Step 6: Deploy on Railway

1. Connect GitHub repository
2. Railway auto-detects PHP
3. Deploys with environment variables
4. Assigns public URL

---

## ðŸŽ¨ Customization Options

### Change Video Banner
Replace `Layrid-Clone/fifth-state-video.mp4` with your video

### Adjust Image Style
Edit `src/ImageGenerator.php` line ~50:
```php
Style requirements:
- Change "dark, muted" to "bright, vibrant"
- Adjust color palette
- Modify atmosphere
```

### Change Dimness of Images
Edit `Layrid-Clone/style.css` line ~172:
```css
.post-image-overlay {
    background: rgba(0, 0, 0, 0.3); /* Lighter or darker */
}
```

### Modify Phase Cards
Edit `Layrid-Clone/index.php` lines 75-152

### Add More Posts Per Page
Edit `Layrid-Clone/index.php` line 9:
```php
$posts = $db->getAllPosts(50); // Change number
```

---

## ðŸ”§ Troubleshooting

### Images Not Generating?

**Check API Key:**
```powershell
php -r "require 'src/config.php'; echo getenv('NANO_BANANA_API_KEY');"
```

**Test API Connection:**
```powershell
php -r "require 'vendor/autoload.php'; require 'src/config.php'; use App\ImageGenerator; \$gen = new ImageGenerator(); var_dump(\$gen);"
```

**Check Logs:**
```powershell
type database\cron.log
```

### Video Not Playing?

1. Check file exists: `Layrid-Clone/fifth-state-video.mp4`
2. Check file size (should be <50MB for fast loading)
3. Try different browser
4. Check browser console (F12) for errors

### Smooth Scroll Not Working?

1. Check Lenis script is loading
2. Check browser console for errors
3. Try hard refresh (Ctrl+Shift+R)

### Database Errors?

```powershell
# Check database schema
php -r "require 'vendor/autoload.php'; require 'src/config.php'; use App\Database; \$db = new Database(); echo 'Database OK';"
```

---

## ðŸ“Š Performance Optimization

### Image Sizes
- Generate at 1920x1080 (16:9)
- Compress to <200KB per image
- Use WebP format for better compression

### Video Optimization
- Compress video to <10MB if possible
- Use H.264 codec
- Resolution: 1920x1080 max

### Database
- Keep posts table indexed
- Archive old posts after 100+ posts
- Regular backups via Railway volumes

---

## ðŸŽ¯ What's Different From Old Blog?

| Feature | Old Blog | New Layrid Design |
|---------|----------|-------------------|
| **Hero** | Static image | Video banner |
| **Layout** | Simple grid | Sticky phase cards |
| **Images** | No images | AI-generated per post |
| **Scroll** | Default | Smooth (Lenis) |
| **Design** | Basic dark | Cinematic dark |
| **Framework** | Basic | Phase-based (STILL/GRIT/REFLECTION/ASCEND) |
| **Posts** | Card layout | Grid with hover effects |
| **Animation** | None | GSAP + parallax |

---

## ðŸ“ˆ Post-Deployment Checklist

### Immediately After Deploy:

- [ ] Visit Railway URL
- [ ] Check video loads
- [ ] Scroll through phase cards
- [ ] View blog posts grid
- [ ] Click into a post
- [ ] Check images load
- [ ] Test on mobile

### Within First Week:

- [ ] Generate new posts (check images)
- [ ] Monitor API usage (Nano Banana)
- [ ] Check Railway logs
- [ ] Backup database
- [ ] Set up cron-job.org for auto-posting

### Ongoing:

- [ ] Generate 1 post per day
- [ ] Monitor image quality
- [ ] Check Railway resource usage
- [ ] Update prompts if needed
- [ ] Add new topics

---

## ðŸ” Security Notes

### API Keys (Don't Expose):
- CLAUDE_API_KEY - stored in .env
- NANO_BANANA_API_KEY - stored in .env
- CRON_SECRET - for triggering posts

### Database:
- SQLite file not publicly accessible
- Volume mounted outside public directory

### Images:
- Stored in `/public/images/posts/`
- Publicly accessible (intended)
- No sensitive data in filenames

---

## ðŸ’° Cost Estimate

### Railway:
- Free tier: First project free
- Paid: ~$5/month

### Claude API:
- ~$0.01-0.03 per post
- 30 posts/month = ~$0.90

### Nano Banana (Google Imagen):
- Check current pricing
- Estimate: ~$0.01-0.05 per image
- 30 images/month = ~$1.50

**Total: ~$7-8/month**

---

## ðŸŽ‰ You're Ready to Deploy!

### Your production site includes:
âœ… Layrid's premium design aesthetic  
âœ… Your framework-based blog content  
âœ… AI-generated cinematic images  
âœ… Video hero banner  
âœ… Smooth animations & effects  
âœ… Phase-based navigation  
âœ… Responsive design  
âœ… Railway-ready configuration  

### Test Command:
```powershell
cd Layrid-Clone
php -S localhost:8000
# Visit: http://localhost:8000
```

### Deploy Command:
```bash
git push origin main
# Railway auto-deploys
```

**Your blog is now production-ready!** ðŸš€

---

## ðŸ“ž Need Help?

### Common Issues:
1. **Images not generating** â†’ Check API key & logs
2. **Video not playing** â†’ Check file size & format
3. **Database errors** â†’ Check schema updated
4. **Styling issues** â†’ Hard refresh browser

### Files to Check:
- `.env` - API keys configured?
- `database/cron.log` - Generation logs
- Railway logs - Deployment errors
- Browser console (F12) - Frontend errors

Your production site is ready to launch! ðŸŽ¨ðŸš€




